<% layout("/layouts/boilerplate.ejs") %>

<link rel="stylesheet" href="/css/inst_signup.css">

<div class="d-flex justify-content-center align-items-center min-vh-100">
    <div class="registration-card shadow-lg rounded-4 overflow-hidden">
        <!-- Header Section -->
        <div class="registration-header text-white text-center p-4" style="background: linear-gradient(90deg, #00b894, #00e676);">
            <i class="bi bi-building" style="font-size: 3rem;"></i>
            <h3 class="mt-2">Institute Registration</h3>
            <p>Connect your institution with Guidion</p>
        </div>

    <!-- Form Section -->
    <div class="bg-white p-5">
        <form action="/institute/register" method="POST" class="needs-validation" novalidate>

            <div class="mb-3">
                <label for="instituteName" class="form-label fw-semibold">Institute Name *</label>
                <input type="text" name="instituteName" id="instituteName" class="form-control" placeholder="ABC College of Technology" required>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="deanName" class="form-label fw-semibold">Dean's Name *</label>
                    <input type="text" name="deanName" id="deanName" class="form-control" placeholder="Dr. Jane Doe" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="deanEmail" class="form-label fw-semibold">Dean's Email *</label>
                    <input type="email" name="deanEmail" id="deanEmail" class="form-control" placeholder="dean@college.edu" required>
                </div>
            </div>

            <div class="mb-3">
                <label for="address" class="form-label fw-semibold">Institute Address *</label>
                <textarea name="address" id="address" class="form-control" rows="3" placeholder="Enter full address" required></textarea>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="contactNumber" class="form-label fw-semibold">Contact Number *</label>
                    <input type="tel" name="contactNumber" id="contactNumber" class="form-control" placeholder="+91 9876543210" pattern="[0-9+ ]{10,15}" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="website" class="form-label fw-semibold">Website (Optional)</label>
                    <input type="url" name="website" id="website" class="form-control" placeholder="https://www.institute.edu">
                </div>
            </div>

            <div class="row">
                <div class="col-md-6 mb-3">
                    <label for="password" class="form-label fw-semibold">Password *</label>
                    <input type="password" name="password" id="password" class="form-control" placeholder="Min 6 characters" required>
                </div>
                <div class="col-md-6 mb-3">
                    <label for="confirmPassword" class="form-label fw-semibold">Confirm Password *</label>
                    <input type="password" name="confirmPassword" id="confirmPassword" class="form-control" placeholder="Re-enter password" required>
                </div>
            </div>

            <!-- Submit Button -->
            <div class="d-grid mt-4">
                <button type="submit" class="btn text-white fw-bold py-2" style="background: linear-gradient(90deg, #00b894, #00e676); border: none;">
                    Register Institute
                </button>
            </div>

            <!-- Back and Sign In Links -->
            <div class="text-center mt-3 mb-0">
                <a href="/" class="btn btn-outline-success me-2">Back to Home</a>
                <span>Already have an account?</span>
                <a href="/ilogin" class="text-decoration-none fw-semibold text-gradient"> Sign in here</a>
            </div>
        </form>
    </div>
</div>

</div>

<script>
    // Wait for the DOM to load
    document.addEventListener("DOMContentLoaded", function () {
        const form = document.querySelector(".needs-validation");

        form.addEventListener("submit", function (event) {
            // Clear previous errors
            const inputs = form.querySelectorAll("input, textarea");
            inputs.forEach(input => input.classList.remove("is-invalid"));

            let valid = true;

            // Institute Name
            const instituteName = document.getElementById("instituteName");
            if (!instituteName.value.trim()) {
                instituteName.classList.add("is-invalid");
                valid = false;
            }

            // Dean Name
            const deanName = document.getElementById("deanName");
            if (!deanName.value.trim()) {
                deanName.classList.add("is-invalid");
                valid = false;
            }

            // Dean Email
            const deanEmail = document.getElementById("deanEmail");
            const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
            if (!deanEmail.value.trim() || !emailPattern.test(deanEmail.value)) {
                deanEmail.classList.add("is-invalid");
                valid = false;
            }

            // Address
            const address = document.getElementById("address");
            if (!address.value.trim()) {
                address.classList.add("is-invalid");
                valid = false;
            }

            // Contact Number
            const contactNumber = document.getElementById("contactNumber");
            const contactPattern = /^[0-9+ ]{10,15}$/;
            if (!contactNumber.value.trim() || !contactPattern.test(contactNumber.value)) {
                contactNumber.classList.add("is-invalid");
                valid = false;
            }

            // Website (optional)
            const website = document.getElementById("website");
            if (website.value.trim()) {
                try {
                    new URL(website.value); // basic URL check
                } catch (e) {
                    website.classList.add("is-invalid");
                    valid = false;
                }
            }

            // Password & Confirm Password
            const password = document.getElementById("password");
            const confirmPassword = document.getElementById("confirmPassword");
            if (!password.value || password.value.length < 6) {
                password.classList.add("is-invalid");
                valid = false;
            }
            if (password.value !== confirmPassword.value) {
                confirmPassword.classList.add("is-invalid");
                valid = false;
            }

            // Prevent submission if invalid
            if (!valid) {
                event.preventDefault();
                event.stopPropagation();
            }

            form.classList.add("was-validated");
        });
    });
</script>
